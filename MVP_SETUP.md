# 組織図管理システム MVP セットアップガイド

組織図管理システムMVPの設定と動作確認手順です。

## 🚀 MVP機能概要

1. **認証システム** - Supabase Auth による基本認証
2. **採用計画管理** - 採用ポジションの作成・編集・削除
3. **統合組織図** - 現在の従業員と採用予定ポジションを統合表示
4. **ダッシュボード** - 組織の基本統計とアクセス
5. **マルチテナント対応** - テナント分離のデータ管理

## 📋 必要な環境

- Node.js 18+
- npm または yarn
- Supabaseアカウント

## ⚙️ 環境設定

### 1. 環境変数の設定

`.env.local`ファイルを作成してください：

```bash
# Supabase設定
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Stripe設定（将来の実装用）
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret
```

### 2. Supabaseプロジェクト設定

1. [Supabase](https://supabase.com)でプロジェクトを作成
2. データベースマイグレーションを実行：

```sql
-- supabase/migrations/001_initial_schema.sql の内容を実行
```

### 3. 依存関係のインストール

```bash
npm install
```

## 🎮 MVPデモアカウント

```
Email: demo@example.com
Password: demo123
```

※MVPでは認証はフロントエンドのみで、実際のSupabase認証はデモ用です

## 🏃‍♂️ 動作確認手順

### 1. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` にアクセス

### 2. 認証フローの確認

1. サインインページに自動リダイレクト
2. デモアカウントでサインイン
3. ダッシュボードに移動

### 3. 主要機能の動作テスト

#### ダッシュボード (`/dashboard`)
- [x] 組織統計の表示
- [x] ユーザー情報の表示
- [x] ナビゲーションの動作

#### 採用計画 (`/recruitment`)
- [x] 採用計画一覧の表示
- [x] 新規採用計画の作成
- [x] 採用計画の編集・削除
- [x] 統計情報の表示

#### 統合組織図 (`/unified-org-chart`)
- [x] 現在の従業員ノードの表示
- [x] 採用予定ポジションの表示（青い点線ボーダー）
- [x] ノード詳細情報の表示
- [x] フィルタリング機能

#### 従来組織図 (`/org-chart`)
- [x] 従来の組織図機能
- [x] バージョン管理機能
- [x] ノードの詳細表示

## 🔧 データ構造

### 主要テーブル

1. **tenants** - マルチテナント管理
2. **employees** - 従業員情報
3. **recruitment_plans** - 採用計画

### サンプルデータ

MVP起動時に以下のサンプルデータが利用可能：

- テナント: `sample-tenant`
- サンプル従業員: 30名
- サンプル採用計画: 5件

## 🎯 MVPで実装済みの機能

### ✅ 完了機能

1. **基本認証システム**
   - Supabase Auth統合
   - 保護されたルート
   - ログイン/ログアウト

2. **採用計画管理**
   - CRUD操作（作成・読取・更新・削除）
   - スキルタグ管理
   - 統計ダッシュボード

3. **統合組織図**
   - React Flow による可視化
   - 従業員と採用予定の統合表示
   - ノード詳細パネル
   - フィルタリング機能

4. **ダッシュボード**
   - 組織統計の表示
   - ユーザー情報
   - ナビゲーション

### 📝 制限事項（MVPスコープ外）

- 実際のユーザー登録機能
- 本格的なテナント管理
- Stripe決済連携
- 高度な権限管理
- エクスポート機能の実装
- メール通知
- 高度なレポート機能

## 🐛 トラブルシューティング

### よくある問題

1. **サインインできない**
   - デモアカウント情報を確認
   - 環境変数が正しく設定されているか確認

2. **データが表示されない**
   - Supabaseマイグレーションが実行されているか確認
   - ネットワーク接続を確認

3. **ページが表示されない**
   - 開発サーバーが起動しているか確認
   - ポート3000が利用可能か確認

## 📈 次のステップ

MVP確認後の開発ロードマップ：

1. **Phase 1** - ユーザー登録・テナント管理
2. **Phase 2** - 権限管理・承認ワークフロー
3. **Phase 3** - Stripe決済・サブスクリプション
4. **Phase 4** - 高度なレポート・分析機能

## 📞 サポート

技術的な問題や質問がある場合は、開発チームにお問い合わせください。

---

**MVP開発完了日**: 2025年8月3日
**バージョン**: 1.0.0-mvp